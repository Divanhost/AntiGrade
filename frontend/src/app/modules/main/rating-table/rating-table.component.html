  <div class="page-container mt-3 central table-editable">
    <h2>Рейтинговая таблица</h2>
    <div class="d-flex mb-1">
      <div class="btn btn-outline-primary" (click)="getCurrentRating()">Рейтинг</div>
      <div class="btn btn-outline-primary" (click)="getAdditionalRating()">Добор</div>
    </div>
    
    <div *ngIf="loaded" class="rating-holder">
      <div id="full-table">
        <td class="cell">
          <table class="table table-bordered table-responsive-md table-striped text-center">
            <thead>
              <tr>
                <th>
                  Вид работы
                </th>
              </tr>
              <tr>
                <th>
                  Студент
                </th>
              </tr>
              <tr>
                <th class="readonly-cell"></th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let student of students">
                <td>
                  {{student.lastName}} {{student.firstName}}
                </td>
              </tr>
            </tbody>
          </table>
        </td>
        <td class="cell" *ngIf="lects.length">
          <app-partial-table title="Лекции" [works]="lects" [students]="students" [subjectId]="subjectId" [studentWorks] = "studentWorks"
            [disabled]="disableLects" [mode]="mode" (changeData)=updateData($event)>
          </app-partial-table>
        </td>
        <td class="cell" *ngIf="practs.length">
          <app-partial-table title="Практики" [works]="practs" [students]="students" [subjectId]="subjectId" [studentWorks] = "studentWorks"
            [disabled]="disablePracts" [mode]="mode" (changeData)=updateData($event)>
          </app-partial-table>
        </td>
        <td class="cell" *ngIf="labs.length">
          <app-partial-table title="Лабораторные работы" [works]="labs" [students]="students" [subjectId]="subjectId" [studentWorks] = "studentWorks"
            [disabled]="disableLabs" [mode]="mode" (changeData)=updateData($event)>
          </app-partial-table>
        </td>
        <td class="cell">
          <table class="table table-bordered table-responsive-md table-striped text-center">
            <thead>
              <tr>
                <th colspan="4">
                  Итоги
                </th>
              </tr>
              <tr>
                <th>
                  Всего за семестр
                </th>
                <th>
                  Добор
                </th>
                <th>
                  Экзамен
                </th>
                <th>
                  Итого
                </th>
              </tr>
              <tr>
                <th class="readonly-cell"> </th>
                <th class="readonly-cell"> </th>
                <th class="readonly-cell"> </th>
                <th class="readonly-cell"> </th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let sum of totals; let i = index">
                <td>
                  {{sum.totals}}
                </td>
                <td >
                  <ng-container *ngIf="additionalTotals.length">
                    {{additionalTotals[i].totals}}
                  </ng-container>
                </td>
                <td>
                  <ng-container *ngIf="examResults.length">
                    {{examResults[i].points}}
                  </ng-container>
                </td>
                <td>
                  <ng-container *ngIf="true">
                    {{sum.totals}}
                  </ng-container>
                  <ng-container *ngIf="false">
                    {{sum.totals + additionalTotals[i].totals}}
                  </ng-container>
                  <ng-container *ngIf="false">
                    {{sum.totals + additionalTotals[i].totals + examResults[i].points}}
                  </ng-container>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
      </div>
    </div>
    <div class="btn btn-success mb-1" (click)="updateStudentWorks()"> Сохранить</div>
    <div class="btn btn-primary" [routerLink]="['/subjects']"> Назад</div>
  </div>